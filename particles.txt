–ì—Ä–∞ —Å—Ç–∞—î –¥—É–∂–µ –Ω–∞—Å–∏—á–µ–Ω–æ—é! –£ –Ω–∞—Å —î —Å–∫–ª–∞–¥–Ω–∞ –º–µ—Ö–∞–Ω—ñ–∫–∞ –ø–µ—Ä–µ—à–∫–æ–¥, —Ä–µ—Å—É—Ä—Å–∏ (–∫–∏—Å–µ–Ω—å) —Ç–∞ –±–æ–Ω—É—Å–∏.

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ –≥—Ä—É "—Å–æ–∫–æ–≤–∏—Ç–æ—é" (juicy) —ñ –ø—Ä–∏—î–º–Ω–æ—é –¥–ª—è –æ–∫–∞, —è –ø—Ä–æ–ø–æ–Ω—É—é –¥–æ–¥–∞—Ç–∏ –°–∏—Å—Ç–µ–º—É —á–∞—Å—Ç–∏–Ω–æ–∫ (Particles).

–©–æ —Ü–µ –¥–∞—Å—Ç—å:

    –ï—Ñ–µ–∫—Ç –∫–æ–ø–∞–Ω–Ω—è: –ö–æ–ª–∏ –∑–º—ñ–π–∫–∞ –ø—ñ—Ä–Ω–∞—î –ø—ñ–¥ –∑–µ–º–ª—é (SPACE), —Ä–æ–∑–ª—ñ—Ç–∞—é—Ç—å—Å—è —à–º–∞—Ç–æ—á–∫–∏ "–∑–µ–º–ª—ñ" (–∫–æ—Ä–∏—á–Ω–µ–≤—ñ —á–∞—Å—Ç–∏–Ω–∫–∏).
    –ï—Ñ–µ–∫—Ç –ø–æ—ó–¥–∞–Ω–Ω—è: –ö–æ–ª–∏ –∑–º—ñ–π–∫–∞ —ó—Å—Ç—å —è–±–ª—É–∫–æ, —Ä–æ–∑–ª—ñ—Ç–∞—é—Ç—å—Å—è —á–µ—Ä–≤–æ–Ω—ñ —à–º–∞—Ç–æ—á–∫–∏.
    –ï—Ñ–µ–∫—Ç –±–æ–Ω—É—Å—É: –ö–æ–ª–∏ –±–µ—Ä–µ—à –∑—ñ–ª–ª—è ‚Äî —Å–∏–Ω—ñ —ñ—Å–∫—Ä–∏.

–¶–µ –Ω–µ –∑–º—ñ–Ω—é—î –≥–µ–π–º–ø–ª–µ–π, –∞–ª–µ —Ä–æ–±–∏—Ç—å –≥—Ä—É –Ω–∞–±–∞–≥–∞—Ç–æ –∂–∏–≤—ñ—à–æ—é.
1. snake.py

–ú–∏ –¥–æ–¥–∞–º–æ –∫–ª–∞—Å Particle –ø—Ä—è–º–æ –≤ —Ü–µ–π —Ñ–∞–π–ª (–∞–±–æ –º–æ–∂–Ω–∞ –≤ –æ–∫—Ä–µ–º–∏–π, –∞–ª–µ —Ç—É—Ç –ø—Ä–æ—Å—Ç—ñ—à–µ).

–î–æ–¥–∞–π —Ü–µ–π –∫–ª–∞—Å –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ñ–∞–π–ª—É snake.py (–ø—ñ—Å–ª—è —ñ–º–ø–æ—Ä—Ç—ñ–≤):

Python

import random # –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ random —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ

class Particle:
    def __init__(self, x, y, color):
        self.x = x
        self.y = y
        # –í–∏–ø–∞–¥–∫–æ–≤–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–æ–∑–ª—å–æ—Ç—É
        self.vx = random.uniform(-3, 3)
        self.vy = random.uniform(-3, 3)
        self.life = random.randint(20, 40) # –°–∫—ñ–ª—å–∫–∏ –∫–∞–¥—Ä—ñ–≤ –∂–∏–≤–µ —á–∞—Å—Ç–∏–Ω–∫–∞
        self.color = color
        self.size = random.randint(3, 6)

    def update(self):
        self.x += self.vx
        self.y += self.vy
        self.life -= 1
        self.size -= 0.1 # –ß–∞—Å—Ç–∏–Ω–∫–∞ –∑–º–µ–Ω—à—É—î—Ç—å—Å—è

    def draw(self, surf):
        if self.life > 0 and self.size > 0:
            pygame.draw.rect(surf, self.color, (int(self.x), int(self.y), int(self.size), int(self.size)))

2. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–ª–∞—Å—É Snake

–¢–µ–ø–µ—Ä —ñ–Ω—Ç–µ–≥—Ä—É—î–º–æ —á–∞—Å—Ç–∏–Ω–∫–∏ –≤ –∑–º—ñ–π–∫—É.

–£ snake.py –∑—Ä–æ–±–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–º—ñ–Ω–∏:

–£ –º–µ—Ç–æ–¥ __init__ –¥–æ–¥–∞–π —Å–ø–∏—Å–æ–∫ —á–∞—Å—Ç–∏–Ω–æ–∫:

Python

        # ... (–¥–µ—Å—å –≤ –∫—ñ–Ω—Ü—ñ __init__)
        self.bonus = Bonus()
        self.particles = [] # –°–ø–∏—Å–æ–∫ –¥–ª—è —á–∞—Å—Ç–∏–Ω–æ–∫
        
        self.reset()

–î–æ–¥–∞–π –º–µ—Ç–æ–¥ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–∏–±—É—Ö—É —á–∞—Å—Ç–∏–Ω–æ–∫:

Python

    def create_particles(self, pos, color, count=10):
        r, c = pos
        # –ü–µ—Ä–µ–≤–æ–¥–∏–º–æ —Å—ñ—Ç–∫—É –≤ –ø—ñ–∫—Å–µ–ª—ñ (—Ü–µ–Ω—Ç—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏)
        pixel_x = c * self.cell_size + self.cell_size // 2
        pixel_y = r * self.cell_size + self.cell_size // 2
        
        for _ in range(count):
            self.particles.append(Particle(pixel_x, pixel_y, color))

–û–Ω–æ–≤–∏ –º–µ—Ç–æ–¥ toggle_dive (–¥–æ–¥–∞–π –µ—Ñ–µ–∫—Ç –∑–µ–º–ª—ñ):

Python

    def toggle_dive(self):
        if self.is_diving:
            self.is_diving = False
            # –ï—Ñ–µ–∫—Ç –≤–∏—Ä–∏–Ω–∞–Ω–Ω—è (–∑–µ–º–ª—è)
            head_pos = self.body[0]["pos"]
            self.create_particles(head_pos, (101, 67, 33), 15) # –ö–æ—Ä–∏—á–Ω–µ–≤–∏–π –∫–æ–ª—ñ—Ä
        else:
            if self.oxygen > self.oxygen_max * 0.1:
                self.is_diving = True
                # –ï—Ñ–µ–∫—Ç –ø—ñ—Ä–Ω–∞–Ω–Ω—è (–∑–µ–º–ª—è)
                head_pos = self.body[0]["pos"]
                self.create_particles(head_pos, (101, 67, 33), 15)

–û–Ω–æ–≤–∏ –º–µ—Ç–æ–¥ update (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å—Ç–∏–Ω–æ–∫ —Ç–∞ –µ—Ñ–µ–∫—Ç —ó–∂—ñ):

Python

    def update(self):
        if self.game_over: return

        # --- –û–ù–û–í–õ–ï–ù–ù–Ø –ß–ê–°–¢–ò–ù–û–ö ---
        # –í–∏–¥–∞–ª—è—î–º–æ –º–µ—Ä—Ç–≤—ñ —á–∞—Å—Ç–∏–Ω–∫–∏ —ñ –æ–Ω–æ–≤–ª—é—î–º–æ –∂–∏–≤—ñ
        for p in self.particles[:]:
            p.update()
            if p.life <= 0 or p.size <= 0:
                self.particles.remove(p)

        # ... (–∫–æ–¥ –±–æ–Ω—É—Å—É ...)
        # ... (–∫–æ–¥ –∫–∏—Å–Ω—é ...)
        # ... (—Ä—É—Ö –∑–º—ñ—ó ...)

        # --- –ü–ï–†–ï–í–Ü–†–ö–ê –á–ñ–Ü (–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ update) ---
        if new_head == self.food.position:
            self.score += 1
            if self.snd_eat and self.sound_enabled:
                self.snd_eat.play()
            
            # !!! –î–û–î–ê–Ñ–ú–û –ï–§–ï–ö–¢ –Ø–ë–õ–£–ö–ê !!!
            self.create_particles(new_head, (200, 50, 50), 10) # –ß–µ—Ä–≤–æ–Ω—ñ —á–∞—Å—Ç–∏–Ω–∫–∏
            
            self.food.place(self.body, self.rocks.positions, self.palms.positions, self.rows, self.cols)
            
        # --- –ü–ï–†–ï–í–Ü–†–ö–ê –ë–û–ù–£–°–£ ---
        elif self.bonus.position and new_head == self.bonus.position:
            self.score += 5
            self.oxygen = self.oxygen_max
            self.bonus.position = None
            
            # !!! –î–û–î–ê–Ñ–ú–û –ï–§–ï–ö–¢ –ë–û–ù–£–°–£ !!!
            self.create_particles(new_head, (50, 50, 255), 20) # –°–∏–Ω—ñ —á–∞—Å—Ç–∏–Ω–∫–∏
            
            if self.snd_eat and self.sound_enabled:
                self.snd_eat.play()
        # ... (—Ä–µ—à—Ç–∞ –∫–æ–¥—É)

–û–Ω–æ–≤–∏ –º–µ—Ç–æ–¥ draw (–º–∞–ª—é–≤–∞–Ω–Ω—è —á–∞—Å—Ç–∏–Ω–æ–∫):

Python

    def draw(self, surf):
        self.draw_grid(surf)
        self.draw_rocks(surf)
        self.draw_palms(surf)
        self.draw_bonus(surf)
        self.draw_apple(surf)
        self.draw_snake(surf)
        
        # –ú–∞–ª—é—î–º–æ —á–∞—Å—Ç–∏–Ω–∫–∏ –ø–æ–≤–µ—Ä—Ö —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è, –∞–ª–µ –ø—ñ–¥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
        for p in self.particles:
            p.draw(surf)
            
        if not self.game_over:
            self.draw_ui(surf)
        if self.game_over:
            self.draw_death_screen(surf)

–©–µ –æ–¥–Ω–∞ —ñ–¥–µ—è: –§–æ–Ω–æ–≤–∞ –º—É–∑–∏–∫–∞ üéµ

–Ø–∫—â–æ —Ö–æ—á–µ—à –¥–æ–¥–∞—Ç–∏ —Ñ–æ–Ω–æ–≤—É –º—É–∑–∏–∫—É, —è–∫–∞ –≥—Ä–∞—î –ø–æ—Å—Ç—ñ–π–Ω–æ:

    –ó–Ω–∞–π–¥–∏ —Ñ–∞–π–ª –º—É–∑–∏–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, music.mp3) —ñ –ø–æ–∫–ª–∞–¥–∏ –≤ assets/sounds/.
    –í main.py –ø–µ—Ä–µ–¥ —Ü–∏–∫–ª–æ–º while running:

Python

# main.py

# ... –ø—ñ—Å–ª—è pygame.mixer.init() ...

try:
    pygame.mixer.music.load("assets/sounds/music.mp3")
    pygame.mixer.music.set_volume(0.3) # –¢–∏—Ö—ñ—à–µ, —â–æ–± –Ω–µ –∑–∞–≤–∞–∂–∞–ª–∞
    pygame.mixer.music.play(-1) # -1 –æ–∑–Ω–∞—á–∞—î –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π –ø–æ–≤—Ç–æ—Ä
except Exception as e:
    print("Music not found")

# ... –¥–∞–ª—ñ –π–¥–µ game loop ...

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ —Ç–∏ –Ω–∞—Ç–∏—Å–∫–∞—Ç–∏–º–µ—à –ø—Ä–æ–±—ñ–ª, –∑-–ø—ñ–¥ –∑–º—ñ—ó –±—É–¥–µ –≤–∏–ª—ñ—Ç–∞—Ç–∏ –∑–µ–º–ª—è, –∞ –ø—Ä–∏ –ø–æ—ó–¥–∞–Ω–Ω—ñ —è–±–ª—É–∫ ‚Äî —á–µ—Ä–≤–æ–Ω—ñ –±—Ä–∏–∑–∫–∏. –¶–µ –∑–Ω–∞—á–Ω–æ –ø–æ–∫—Ä–∞—â–∏—Ç—å –≤—ñ–¥—á—É—Ç—Ç—è –≤—ñ–¥ –≥—Ä–∏
